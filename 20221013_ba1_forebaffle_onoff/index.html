<!DOCTYPE html>

<head>
    <meta charset="utf-8">
    <title>BA4 umux Readout and RF Cable Routing Design -- T. Liu</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <!-- Load up MathJax for math notation -->
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
    </script>
    <script type="text/javascript" src="../mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
</head>

<body>
    <!-- Add my custom pa>er script -->
    <script type="text/javascript" src="scripts/pager.js"></script>
    <link rel="stylesheet" type="text/css" href="scripts/pager.css">

    <header>
        <h1>BA4 Microwave Multiplexing Readout and RF Cable Routing Design </h1>

        <time datetime="2022-10-13" class="published updated">
            2022 Oct 13
        </time> â€”
        Tom Liu, Cheng Zhang
    </header>

    <hr>


    <section>
        <h2>Introduction</h2>
        <p> The BICEP Array 1 receiver (BA1) has an absorptive forebaffle attached to reduce signal contamination from
            the ground.
            The forebaffle acts as a shield that absorbs stray light to ensure the receiver sees only signal from the
            sky.
            Unfortunately, the forebaffle itself contributes its own thermal loading onto the BA1 detectors.
            In this posting, we measure the thermal loading caused by the BA1 forebaffle in various configurations. </p>





    </section>

    <section>
        <h2>Background</h2>
        <p>The detectors in BA1 are Transition Edge Sensors (TES), which pass along a signal that is later amplified by
            Superconductive Quantum
            Interference Devices (SQuIDs). </p>
        <p>The TES works as follows. Light from the sky and environment is captured by antennas, which then heats up the
            microwave termination (Fig 2.1b).
            A resister sits at the edge of the transition between superconducting and normal, so a slight change in
            temperature creates a
            significant change in resistance, causing \(R_{TES}\) to be extremely sensitive to photons absorbed by the
            antenna.
            A bias current is passed throgh the entire circuit, so
            this change in resistance then causes a change in the current \(I_{TES}\) passing through \(R_{TES}\), which
            ultimately amplified by the inductively coupled SQuID. Because the TES is also thermally coupled to a
            thermal bath, the temperature eventually returns to the edge of the transition.
        </p>
        <figure>
            <img alt="TES Schematics, from https://sites.astro.caltech.edu/~rogero/thesis/Ch3_TES_Bolometers.pdf and https://en.wikipedia.org/wiki/File:TES_schematic.pdf" id="tes" src="#" />
            <figcaption>
                Schematic circuit (a) and a real life image (b) for the TES .
            </figcaption>
            <script type="text/javascript">
                pager.link("#tes",
                    {
                        'TES |sc': ['TES Schematic Circuit|TES_schematic',
                            'TES Photo|TES_image',
                        ],
                    },
                    function (params) {
                        console.log('params' + params)
                        name = "figs/tes/" + params.sc + ".png"
                        return name
                    });
            pager.setparams(
                {
                    'sc':'TES_schematic'
                }
            );
            </script>

        </figure>

        <p> We can plot the bias current \(I_b\) against the current passing through the TES, \(I_{TES}\) to verify the
            behavior of our TES.
            When the bias current is low and the TES is cold enough to be superconducting, the TES current is nearly
            equal to the bias current because none of the current passes through \(R_L\) as shown in Fig 2.1a.
            The inductance \(L\) contributes negligible impedance.
            As the current increases, it heats up the resistor past the superconducting regime, increasing its
            resistance.
            As the resistance drastically increases, the current passing through it decreases.
            Then, once the resistor is fully in the normal regime, the resistance increases less strongly, so
            \(R_{TES}\) is
            nearly constant with respect to \(I_b\). This leads to \(I_{TES}\) varying linearly again with the bias
            current,
            but with a shallower slope depending on \(R_L\).
        </p>

        <figure>
            <img alt="TES Curves" id="current" src="#" />
            <figcaption>
                Sketch of the bias current vs TES current (a) and the curve with real data (b).
            </figcaption>
            <script type="text/javascript">
                pager.link("#current",
                    {
                        'Load Curves|c': ['Sketch of current curve|current_sketch',
                            'Current Curve with real data|current_data',
                        ],
                    },
                    function (params) {
                        console.log('params' + params)
                        name = "figs/curves/" + params.c + ".png"
                        return name
                    });
                    pager.setparams(
                {
                    'c':'current_sketch'
                }
            );            
            </script>

        </figure>
        <p>
            To determine the power loading on the TES, we plot the power running through the TES as a function of the
            TES resistance.
            Because the TES is coupled to a thermal bath, the equation for the power is
            \[ P_{bath} = Q + P_J\]
            where \(P_J\) is the \(I^2 R\) running through the TES, \(Q\) is the optical loading from the sky, and
            \(P_{bath}\)
            is the amount of power transfered from the TES to the thermal bath.

            Because the setup uses negative electrothermal feedback, the bias current adjusts the electrical power down
            when there is an increase in optical power, locking the TES at a constant temperature.
            \(P_{bath}\) is kept constant within the phase transition of the TES resistor,
            so for a constant sky loading \(Q\), the power running through the TES is also constant with respect to an
            increase in resistance.
            In the superconducting regime, no current is running through the TES resistor, so \(P_J\) is zero,
            and once the bias current increases the temperature enough to the normal regime, the power can
            increase without an increase in the TES resistance.


        </p>
        <p>
            Note that in the forebaffle on-off experiment, the bias current starts high, where the TES is in the normal
            regime,
            then decreases until the resistor enters the phase transition.
        </p>
        <figure>
            <img alt="TES Curves" id="thermal" src="#" />
            <figcaption>
                Sketch of the TES resistance vs TES power (a) and the curve with real data (b).
            </figcaption>
            <script type="text/javascript">
                pager.link("#thermal",
                    {
                        'Load Curves|l': [
                            'Sketch of power curve|thermal_sketch',
                            'Power Curve with real data|thermal_data',
                        ],
                    },
                    function (params) {
                        console.log('params' + params)
                        name = "figs/curves/" + params.l + ".png"
                        return name
                    });
                pager.setparams(
                {
                    'l':'thermal_sketch'
                }
            );  
            </script>

        </figure>

        <p> In order to determine the effect of the forebaffle on the thermal loading of the TES, we plot this
            \(P_J\) load curve for each detector and
            for several configurations for the forebaffle. Because we expect the forebaffle to contribute additional
            optical loading,
            the increase in \(Q\) corresponds to a decrease in \(P_J\) in the transition. When plotting the \(P_J\)
            load
            curve, we can see this gap as shown in Fig 3.4. This gap is the optical power contributed by the
            forebaffle
            onto a specific detector. </p>
        <figure>
            <img alt="TES Curves" id="onoff" src="#" />
            <figcaption>
                Sketch of the bias current vs TES current (a) and the curve with real data (b).
                Sketch of the TES resistance vs TES power (c) and the curve with real data (d).
            </figcaption>
            <script type="text/javascript">
                pager.link("#onoff",
                    {
                        'Forebaffle Configuration|f': ['Load Curve on-off|thermal_onoff',
                            'Zoomed in load curve|onoff_zoomedin',
                            'Zoomed in half off|thermal_onoffhalf',
                        ],
                    },
                    function (params) {
                        console.log('params' + params)
                        name = "figs/curves/" + params.f + ".png"
                        return name
                    });
                    pager.setparams(
            {
                'f':'thermal_onoff'
            }
        );  
            </script>

        </figure>


        <section>
            <h2>Examining the data</h2>
            

            <subsection>
                <h3>
                    Tile Plots
                </h3>
                <p>
                    We extract the size of the gap between the flat parts of the load curves and plot 
                    the value on tile plots for each detector, giving us plots as follows: 
                </p>
                <figure>
                    <img alt="Tile Plots" id="tile" src="#" />
                    <figcaption>
                        Tile plots
                    </figcaption>
                    <script type="text/javascript">
                        pager.link("#tile",
                            {
                                'Forebaffle Configuration 1|fb1': [
                                    'Initial PLC |noneinit1',
                                    'Initial  off |noneinit2',
                                    'Lower half on BA1|ba1half1',
                                    'Fully on BA1|ba1full',
                                    'Lower half on BA1 (2)|ba1half2',
                                    'Middle off|nonemid',
                                    'On Rx1|keckrx11',
                                    'On Rx1 again|keckrx12',
                                    'On Rx2|keckrx21',
                                    'On Rx2 again|keckrx22',
                                    'On Rx3|keckrx3',
                                    'Final off|nonefinal',
                                    '~~~~~~~~~~~~~~~~~~~~~~~|xxx',
                                ],
                                'Forebaffle Configuration 2|fb2': [
                                'Initial PLC |noneinit1',
                                    'Initial  off |noneinit2',
                                    'Lower half on BA1|ba1half1',
                                    'Fully on BA1|ba1full',
                                    'Lower half on BA1 (2)|ba1half2',
                                    'Middle off|nonemid',
                                    'On Rx1|keckrx11',
                                    'On Rx1 again|keckrx12',
                                    'On Rx2|keckrx21',
                                    'On Rx2 again|keckrx22',
                                    'On Rx3|keckrx3',
                                    'Final off|nonefinal',
                                    '~~~~~~~~~~~~~~~~~~~~~~~|xxx',
                                ],
                                'Receiver Number|rx': [
                                    'BA1|0',
                                    'Keck Rx1|1',
                                    'Keck Rx2|2',
                                    'Keck Rx3|3',
                                ],
                            },
                            function (params) {
                                console.log('params' + params)
                                name = "figs/tiles/" + params.fb1 +'_'+params.fb2+'_rx'+params.rx +".png"
                                if(params.fb1 == 'xxx' || params.fb2 == 'xxx'){
                                    return "figs/samps/dne.png";
                                }
                                return name
                            });
                        pager.setparams(
                {
                    'fb1':'noneinit1',
                    'fb2':'noneinit2',
                    'rx':'0',

                }
            );  
        
                    </script>
        
                </figure>
                To more closely examine each detector, we can plot the individual electrical power load curves.
                <figure>
                    <img alt="Individual Curves" id="indiv" src="#" />
                    <figcaption>
                        Individual curves
                    </figcaption>
                    <script type="text/javascript">
                        pager.link("#indiv",
                            {
                                'Rx|rx': [
                                    '0|0',
                                    '1|1',
                                    '2|2',
                                    '3|3',
                                ],
                                'Tile|tile': [
                                    '1|1',
                                    '2|2',
                                    '3|3',
                                    '4|4',
                                    '---BA1-Only Tiles below---|0',
                                    '5|5',
                                    '6|6',
                                    '7|7',
                                    '8|8',
                                    '9|9',
                                    '10|10',
                                    '11|11',
                                    '12|12',
                                ],
                                'Row|row': [
                                    '1|1',
                                    '2|2',
                                    '3|3',
                                    '4|4',
                                    '5|5',
                                    '6|6',
                                    '7|7',
                                    '8|8',
                                ],
                                'Col|col': [
                                    '1|1',
                                    '2|2',
                                    '3|3',
                                    '4|4',
                                    '5|5',
                                    '6|6',
                                    '7|7',
                                    '8|8',
                                ],
                                'Polarization|pol': [
                                    'A|A',
                                    'B|B',
                                ]
                            },
                            function (params) {
                                console.log('params' + params)
                                
                                name = "figs/samps/rx" + params.rx +'_tile'+params.tile+
                                        '_row'+params.row +"_col" + params.col + 
                                        "_pol"+params.pol + ".png";
                                if(params.rx == 0 && (
                                            (params.row > 5 || params.col > 5) ||  (
                                                !(params.tile == 1 || params.tile == 5 || params.tile == 7 || params.tile == 11) &&
                                                (params.row > 4 || params.col > 4)
                                            )
                                    ) || (params.rx > 0 && params.tile > 4)
                                    ||params.tile==0) {
                                    return "figs/samps/dne.png";
                                }
                                return name;
                                

                            });
                        pager.setparams(
                {
                    'rx':'0',
                    'tile':'1',
                    'row':'1',
                    'col':'1',
                    'pol':'A',

                }
            );  
        
                    </script>
        
                </figure>


                <h3>
                    Forebaffle Configuration Timestamps
                </h3>
                <center>
                    <table style="width:100%;margin-left:auto;margin-right:auto;" border="1,">
                        <tbody>
                            <tr>
                                <td><b>Forebaffle Configuration</b></td>
                                <td><b>Starting command do_partial_loadcurve<br>  (2022-Jan-15)</b></td>
                                <td><b>Partial load curve script execution successfully completed<br> (2022-Jan-15)</b></td>
                                <td><b>Configuration Complete<br>  (2022-Jan-15)</b></td>
                                <td><b>Average power loading difference from init 1 </b></td>
                                <td><b>Notes</b></td>
                            </tr>
                            <tr>
                                <td>Initial PLC</td>
        
                                <td>03:01:09</td>
                                <td>03:02:50</td>
                                <td>03:03:38</td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>Forebaffle off</td>
        
                                <td>03:39:00</td>
                                <td>03:40:41</td>
                                <td>03:41:29</td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>Forebaffle lower-half on</td>
        
                                <td>03:47:38</td>
                                <td>03:49:19</td>
                                <td>03:50:07</td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>Forebaffle upper-half on</td>
        
                                <td>03:53:10</td>
                                <td>03:54:51</td>
                                 <td>03:55:39</td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>Forebaffle lower-half on</td>
        
                                <td>03:58:02</td>
                                <td>03:59:43</td>
                                <td> 04:00:31 </td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>None (mid), no forebaffle</td>
        
                                <td>04:07:39</td>
                                <td>04:09:20</td>
                                <td> 04:10:08 </td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td> keck rx1 (1) </td>
        
                                <td>04:12:43 </td>
                                <td>04:14:24</td>
                                <td> 04:15:12 </td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>   keck rx1 (2) </td>    
                                <td> 04:16:23</td>
                                <td> 04:18:04</td>
                                <td>04:18:52 </td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>   keck rx2 (1) </td>
                                <td> 04:22:33</td>
                                <td>04:24:14</td>
                                 <td>04:25:02 </td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr><td>   keck rx2 (2)  </td>
                                <td>04:25:57</td>
                                <td>04:27:38</td>
                                <td> 04:28:26</td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr><td> keck rx3  </td>
                                <td>04:31:48</td>
                                <td>04:33:29</td>
                                <td> 04:34:16 </td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr><td>  None (final), no forebaffle</td>
                                <td>04:42:51 </td>
                                <td>04:44:31</td>
                                <td> 04:45:20 </td>
                                <td></td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </center>
                <figure>
                    <img alt="Box plots" id="box" src="#" />
                    <figcaption>
                        box plots
                    </figcaption>
                    <script type="text/javascript">
                        pager.link("#box",
                            {
                                'Receiver Number|rx': [
                                    'BA1|0',
                                    'Keck Rx1|1',
                                    'Keck Rx2|2',
                                    'Keck Rx3|3',
                                ],
                            },
                            function (params) {
                                console.log('params' + params)
                                name = "figs/boxplots/rx" + params.rx + ".png"
                                return name
                            });
                            pager.setparams(
                    {
                        'rx':'0'
                    }
                );  
                    </script>
        
                </figure>
            </subsection>
            <section>
                <h2>Conclusion</h2>
                <p>
                    analyze data some more
                </p>
            </section>

        </section>

</body>




